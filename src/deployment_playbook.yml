- hosts: localhost
  pre_tasks:
  - name: Update(or clone) the Git repository
    git:
      repo: https://github.com/AnastasiaBrinati/SDCC_project_22-23.git
      dest: /home/ubuntu/CloudyDays
      update: yes
  - name: sudo apt update
    command: sudo apt-get update -y
  - name: sudo apt upgrade
    command: sudo apt-get upgrade -y
  - name: Add Docker GPG apt Key
    apt_key:
      url: https://download.docker.com/linux/ubuntu/gpg
      state: present
  - name: Add Docker Repository
    apt_repository:
      repo: deb https://download.docker.com/linux/ubuntu focal stable
      state: present
  - name: Update apt and install docker-ce
    apt:
      name: docker-ce
      state: latest
      update_cache: true
  - name: Install Docker Module for Python
    pip:
      name: docker
  - name: Install Minikube dependencies
    command: sudo apt install -y curl wget apt-transport-https
  - name: Download Minikube Binary
    command: curl -LO https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64
  - name: Install Minikube
    command: sudo install minikube-linux-amd64 /usr/local/bin/minikube
  - name: Install Kubectl utility
    command: curl -LO https://dl.k8s.io/release/v1.28.3/bin/linux/amd64/kubectl
  - name: chmod kubectl
    command: sudo chmod +x ./kubectl
  - name: mv kubectl
    command: sudo mv ./kubectl /usr/local/bin/
  - name: Minikube Start
    command: minikube start --vm-driver docker
